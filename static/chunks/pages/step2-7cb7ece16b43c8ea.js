(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[566],{8721:function(e,t,r){"use strict";var n=r(5893);t.Z=function(e){var t=e.name,r=e.clicked,a="Back"===t?"bg-white hover:bg-gray-100 text-gray-800 font-semibold border-gray-400 shadow":"justify-self-end bg-pink-500 hover:bg-pink-700 text-white font-bold border-pink-700";return(0,n.jsx)("button",{className:"".concat("mt-8 py-2 px-4 border rounded focus:outline-none"," ").concat(a),"data-testid":"Back"===t?"back":"submit",onClick:r,children:t})}},3168:function(e,t,r){"use strict";var n=r(5893);t.Z=function(){return(0,n.jsxs)("footer",{className:"fixed h-10 bottom-0 mx-auto opacity-50",children:["Built by\xa0",(0,n.jsx)("a",{className:"italic",href:"https://devskills.co?utm_source=challenge-boilerplate",target:"_blank",title:"DevSkills",rel:"noopener noreferrer",children:"DevSkills"}),", task implementation by\xa0",(0,n.jsx)("a",{className:"italic",href:"https://github.com/ivnteterin",title:"@ivnteterin - GitHub",target:"_blank",rel:"noopener noreferrer",children:"ivnteterin"}),"."]})}},7073:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var n=r(9499),a=r(7294),c=[{step:1,fields:["first name","last name","age"],placeholders:["First name","Last name","Age"]},{step:2,fields:["phone","email"],placeholders:["Phone","E-mail"]},{step:3,fields:["seat","food","allergies"],placeholders:["Seat","Food","Allergies"]}],s=r(1163),i=r(9008),o=r(3168),l=r(8721),u=r(7536),d=r(1851),p=r(5893);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=function(e){var t=e.data,r=e.step,c=e.fields,s=e.placeholders,i=e.onSubmit,o=e.onReturn,f=(0,a.useState)(b({},t)),m=f[0],h=f[1],x=(0,u.cI)(),j=x.register,v=x.handleSubmit,g=x.formState.errors;x.setValue;function y(e){h(b(b({},m),{},(0,n.Z)({},e.target.id,d.Z.cleanData(e.target.id,e.target.value))))}return(0,p.jsx)("div",{className:"flex justify-between flex-col border border-slate-300 p-10 rounded-2xl shadow-xl",style:{minHeight:450},children:(0,p.jsxs)("div",{children:[(0,p.jsxs)("h1",{className:"text-4xl my-4 font-bold text-center","data-testid":"title",children:["Step ",(0,p.jsx)("span",{className:"font-thin",children:r}),(0,p.jsx)("div",{style:{width:50},className:"mt-4 border-2 px-4 mx-auto border-pink-500"})]}),(0,p.jsxs)("div",{className:"mt-8",children:[(0,p.jsx)("form",{id:"form-".concat(r),className:"flex mb-6 flex-col space-y-2 items-center",children:c.map((function(e,t){var r;return(0,p.jsxs)("div",{className:"flex flex-col",children:[(0,p.jsx)("div",{className:"flex justify-center",style:{minWidth:300},children:(0,p.jsx)("input",b({className:"ml-4 border-black border-b border-slate-200",placeholder:s[t],"data-testid":d.Z.camelcase(e),id:e,type:d.Z.getType(e),onInput:y,value:m[e]},j(e,d.Z.getOptions(e))))},t),(0,p.jsx)("div",{className:"text-center",children:(0,p.jsx)("small",{className:"text-red-500 text-xs italic",children:d.Z.errorHandler(null===(r=g[e])||void 0===r?void 0:r.type,e)})})]},"outer-".concat(t))}))}),(0,p.jsxs)("div",{className:"flex justify-between",children:[r>1?(0,p.jsx)(l.Z,{name:"Back",clicked:function(){o()}}):(0,p.jsx)("div",{}),(0,p.jsx)(l.Z,{name:"Submit",clicked:v((function(e){i(b({},e))}))})]})]})]})})};function h(e){var t=e.currentStep,r=e.formSteps,n=e.formData,a=e.onSubmit,c=e.onReturn;return(0,p.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen py-2",children:[(0,p.jsx)(i.default,{children:(0,p.jsx)("title",{children:"Ticket Order Form"})}),(0,p.jsx)("div",{children:(0,p.jsx)(m,{data:n,step:t,steps:r.length,fields:r[t-1].fields,placeholders:r[t-1].placeholders,onSubmit:function(e){a(e)},onReturn:function(){c()}})}),(0,p.jsx)(o.Z,{})]})}var x=r(1126);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=function(e){var t=e.pageNr,r=(0,s.useRouter)(),n=(0,x.G)(),i=n.formData,o=n.nextStep,l=n.updateNextStep,u=n.updateFormData,d=n.updateSubmit;return(0,a.useEffect)((function(){t&&l(t)}),[]),(0,p.jsx)(h,{currentStep:t||o,formSteps:c,formData:i,onSubmit:function(e){u(v(v({},i),e)),d(!1),c.length===t?r.push("/checkout"):(l(o+1),r.push("/step".concat(o+1)))},onReturn:function(){l(o-1),r.push("/step".concat(o-1))}})}},4742:function(e,t,r){"use strict";r.r(t);var n=r(7073),a=r(5893);t.default=function(){return(0,a.jsx)(n.Z,{pageNr:2})}},1851:function(e,t){"use strict";t.Z={getType:function(e){return"age"===e?"number":"text"},capitalise:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},camelcase:function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()})).replace(/\s+/g,"")},errorHandler:function(e,t){var r="",n=this.capitalise(t);switch(e){case"required":r="phone"===t?"".concat(n," number is a required field "):"age"===t?" ".concat(n," must be a number"):"".concat(n," is a required field ");break;case"pattern":r="email"===t?" ".concat(n," should have correct format "):" ".concat(n," should not contain ").concat("age"===t||"phone"===t?"letters":"numbers"," ");break;case"min":r=" ".concat(n," should be positive ");break;default:r=""}return r},getOptions:function(e){var t={};switch(e){case"first name":case"last name":t={required:!0,pattern:/^[A-Za-z]+$/i};break;case"age":t={required:!0,pattern:/^[0-9]+$/i,min:0};break;case"email":t={required:!0,pattern:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i};break;case"phone":t={required:!0,pattern:/^\+\d[\d\s]+/};break;default:t={required:!0}}return t},cleanData:function(e,t){var r="";switch(e){case"email":r=t.toLowerCase();break;case"seat":r=t.toUpperCase();break;case"phone":r=t.includes("+")?t:"+".concat(t);break;default:r=t}return r}}},6903:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/step2",function(){return r(4742)}])}},function(e){e.O(0,[825,774,888,179],(function(){return t=6903,e(e.s=t);var t}));var t=e.O();_N_E=t}]);